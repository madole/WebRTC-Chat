!function(){function e(e){$(".connected-peer span").text(e.peer),$(".send").click(function(){var n=$(".chat-message").val();e.send(n)}),e.on("data",function(e){console.log("Recieving data: "+e),c.append("<div>"+e+"</div>")}),e.on("close",function(n){c.append("div"+e.peer+" has left the building</div>"),delete t[e.peer]})}var n=$(".player span").text();console.log("PEER ID: "+n);var o=new Peer(n,{key:"45x3b24gg5qdj9k9",debug:3,logFunction:function(){var e=Array.prototype.slice.call(arguments).join(" ");$(".log").append(e+"<br>")},iceservers:["stun.l.google.com:19302"]}),t={},c=$(".messages-content");o.on("open",function(e){$(".user-id span").text(e)}),o.on("connection",e),$(document).ready(function(){$(".connect").click(function(n){var c=$(".req-peer").text();if(!t[c]){var a=o.connect(c,{serialization:"none",reliable:!1,metadata:{message:"Hi i wanna connect! "}});if(!a)return o.reconnect();a.on("open",function(){e(a)}),a.on("error",function(e){alert(e)})}t[c]=1})})}();